<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shift Scheduler - Inspired by Dollarama</title>
    <meta name="description" content="Interactive shift scheduling tool with constraint-based optimization">
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>

<body>
    <!-- Intro Splash Screen -->
    <div class="intro-overlay" id="intro-overlay">
        <!-- Animated background -->
        <div class="intro-bg-grid"></div>

        <!-- Floating particles -->
        <div class="intro-particles">
            <div class="intro-particle"></div>
            <div class="intro-particle"></div>
            <div class="intro-particle"></div>
            <div class="intro-particle"></div>
            <div class="intro-particle"></div>
            <div class="intro-particle"></div>
            <div class="intro-particle"></div>
            <div class="intro-particle"></div>
            <div class="intro-particle"></div>
        </div>

        <!-- Main content -->
        <div class="intro-content">
            <!-- Logo -->
            <svg class="intro-logo" viewBox="0 0 120 120" fill="none" xmlns="http://www.w3.org/2000/svg">
                <rect width="120" height="120" rx="24" fill="#003F24" />
                <rect x="8" y="8" width="104" height="104" rx="20" fill="#004d2d" fill-opacity="0.5" />
                <text x="60" y="78" text-anchor="middle" fill="#FEE60E" font-size="60" font-weight="bold"
                    font-family="Inter, sans-serif">D</text>
            </svg>

            <!-- Title -->
            <h1 class="intro-title">Shift <span>Scheduler</span></h1>
            <p class="intro-subtitle">Inspired by Dollarama</p>

            <!-- Feature highlights -->
            <div class="intro-features">
                <div class="intro-feature">
                    <span class="intro-feature-icon">üìÖ</span>
                    <span>Smart Scheduling</span>
                </div>
                <div class="intro-feature">
                    <span class="intro-feature-icon">üë•</span>
                    <span>Team Management</span>
                </div>
                <div class="intro-feature">
                    <span class="intro-feature-icon">‚ö°</span>
                    <span>Auto-Optimization</span>
                </div>
                <div class="intro-feature">
                    <span class="intro-feature-icon">üåô</span>
                    <span>Dark Mode</span>
                </div>
            </div>

            <!-- Preview cards -->
            <div class="intro-preview">
                <div class="intro-card">
                    <div class="intro-card-day">Monday</div>
                    <div class="intro-card-shift">06:00 - 14:00</div>
                </div>
                <div class="intro-card">
                    <div class="intro-card-day">Wednesday</div>
                    <div class="intro-card-shift">10:00 - 18:00</div>
                </div>
                <div class="intro-card">
                    <div class="intro-card-day">Saturday</div>
                    <div class="intro-card-shift">14:00 - 21:00</div>
                </div>
            </div>

            <!-- Click hint -->
            <div class="intro-hint">
                <div class="intro-hint-icon">üëÜ</div>
                <span>Click anywhere to enter</span>
            </div>
        </div>
    </div>

    <div class="app-container">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <div class="logo">
                    <div class="header-brand">
                        <svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <rect width="40" height="40" rx="8" fill="#003F24" />
                            <text x="20" y="26" text-anchor="middle" fill="#FEE60E" font-size="20"
                                font-weight="bold">D</text>
                        </svg>
                        <div>
                            <h1>Shift Scheduler</h1>
                            <span class="subtitle">Inspired by Dollarama</span>
                        </div>
                    </div>
                </div>
                <div class="header-actions">
                    <button id="run-scheduler-btn" class="btn btn-primary">
                        <span>‚ñ∂Ô∏è</span> Run Scheduler
                    </button>
                    <button id="theme-toggle" class="btn btn-icon" aria-label="Toggle dark mode">
                        <span class="icon-light">üåô</span>
                        <span class="icon-dark">‚òÄÔ∏è</span>
                    </button>
                    <div class="dropdown">
                        <button class="btn btn-icon" id="menu-btn">‚ãÆ</button>
                        <div class="dropdown-menu" id="dropdown-menu">
                            <button id="export-btn">üì§ Export Data</button>
                            <button id="import-btn">üì• Import Data</button>
                            <button id="reset-btn">üîÑ Reset to Defaults</button>
                        </div>
                    </div>
                </div>
            </div>
            <nav class="tab-nav">
                <button class="tab-btn active" data-tab="schedule">üìã Schedule</button>
                <button class="tab-btn" data-tab="employees">üë• Employees</button>
                <button class="tab-btn" data-tab="shifts">‚è∞ Shifts</button>
                <button class="tab-btn" data-tab="settings">‚öôÔ∏è Settings</button>
            </nav>
        </header>

        <!-- Stats Bar -->
        <section class="stats-bar" id="stats-bar">
            <div class="stat-card">
                <span class="stat-value" id="stat-employees">--</span>
                <span class="stat-label">Employees</span>
            </div>
            <div class="stat-card">
                <span class="stat-value" id="stat-shifts">--</span>
                <span class="stat-label">Shifts</span>
            </div>
            <div class="stat-card">
                <span class="stat-value" id="stat-hours">--</span>
                <span class="stat-label">Hours</span>
            </div>
            <div class="stat-card">
                <span class="stat-value" id="stat-status">--</span>
                <span class="stat-label">Status</span>
            </div>
        </section>

        <!-- Main Content -->
        <main class="main-content">
            <!-- SCHEDULE TAB -->
            <section class="tab-content active" id="tab-schedule">
                <div class="card schedule-section">
                    <div class="card-header">
                        <h2>üìã Weekly Schedule</h2>
                        <div class="view-toggle">
                            <button class="btn btn-sm active" data-view="grid">Grid</button>
                            <button class="btn btn-sm" data-view="list">List</button>
                        </div>
                    </div>
                    <div class="card-body">
                        <div id="schedule-grid" class="schedule-grid">
                            <div class="empty-state">
                                <p>üöÄ Click <strong>Run Scheduler</strong> to generate a schedule</p>
                            </div>
                        </div>
                        <div id="schedule-list" class="schedule-list hidden"></div>
                    </div>
                </div>

                <div class="card hours-section">
                    <div class="card-header">
                        <h2>üë• Employee Hours</h2>
                    </div>
                    <div class="card-body">
                        <div id="hours-summary" class="hours-grid">
                            <div class="empty-state">
                                <p>Run the scheduler to see hours summary</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- EMPLOYEES TAB -->
            <section class="tab-content" id="tab-employees">
                <div class="card">
                    <div class="card-header">
                        <h2>üë• Employees</h2>
                        <button class="btn btn-primary" id="add-employee-btn">+ Add Employee</button>
                    </div>
                    <div class="card-body">
                        <div id="employee-list" class="employee-list"></div>
                    </div>
                </div>
            </section>

            <!-- SHIFTS TAB -->
            <section class="tab-content" id="tab-shifts">
                <div class="card">
                    <div class="card-header">
                        <h2>‚è∞ Shift Templates</h2>
                        <button class="btn btn-primary" id="add-shift-btn">+ Add Shift</button>
                    </div>
                    <div class="card-body">
                        <p class="hint">These shift templates are applied to each day of the week.</p>
                        <div id="shift-list" class="shift-list"></div>
                    </div>
                </div>
            </section>

            <!-- SETTINGS TAB -->
            <section class="tab-content" id="tab-settings">
                <div class="card">
                    <div class="card-header">
                        <h2>‚öôÔ∏è Scheduling Settings</h2>
                    </div>
                    <div class="card-body">
                        <div class="settings-section">
                            <h3 class="settings-title">üìä Scheduling Constraints</h3>
                            <div class="settings-row">
                                <span class="settings-label">Minimum rest hours between shifts</span>
                                <div class="settings-value">
                                    <input type="number" id="setting-min-rest" min="0" max="24" value="10">
                                    <span>hours</span>
                                </div>
                            </div>
                            <div class="settings-row">
                                <span class="settings-label">Maximum consecutive working days</span>
                                <div class="settings-value">
                                    <input type="number" id="setting-max-consecutive" min="1" max="7" value="5">
                                    <span>days</span>
                                </div>
                            </div>
                            <button class="btn btn-primary" id="save-settings-btn" style="margin-top: 1rem;">üíæ Save
                                Settings</button>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h2>üé® Role Management</h2>
                        <button class="btn btn-primary" id="add-role-btn">+ Add Role</button>
                    </div>
                    <div class="card-body">
                        <p class="hint">Customize roles for your team. Default roles cannot be deleted if in use.</p>
                        <div id="role-list" class="shift-list"></div>
                    </div>
                </div>
            </section>
        </main>

        <!-- Footer -->
        <footer class="footer">
            <p>Shift Scheduler v4.2 ‚Ä¢ Built with JavaScript</p>
            <p class="footer-link">
                <a href="https://github.com/uzair-aftab/dollarama-scheduler" target="_blank">View on GitHub</a>
            </p>
            <p class="footer-disclaimer">
                This tool was created by <strong>Uzair Aftab</strong> as a personal portfolio project,
                inspired by his 3-month experience working at Dollarama.
                It is <strong>not affiliated with, endorsed by, or connected to Dollarama</strong> in any way.
            </p>
        </footer>
    </div>

    <!-- MODAL: Employee Form -->
    <div class="modal-overlay" id="employee-modal">
        <div class="modal">
            <div class="modal-header">
                <h3 id="employee-modal-title">Add Employee</h3>
                <button class="btn btn-icon modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <form id="employee-form">
                    <input type="hidden" id="emp-id">

                    <div class="form-group">
                        <label for="emp-name">Name</label>
                        <input type="text" id="emp-name" required placeholder="Enter employee name">
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="emp-role">Role</label>
                            <select id="emp-role" required>
                                <option value="ATL">ATL (Manager)</option>
                                <option value="FullTime">Full Time</option>
                                <option value="PartTime">Part Time</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="emp-target">Target Hours</label>
                            <input type="number" id="emp-target" min="0" max="60" value="20" required>
                        </div>
                        <div class="form-group">
                            <label for="emp-max">Max Hours</label>
                            <input type="number" id="emp-max" min="0" max="60" value="24" required>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Availability</label>
                        <p class="hint">Click to toggle availability. Drag to set time range.</p>
                        <div class="availability-grid" id="availability-grid"></div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn" id="cancel-employee-btn">Cancel</button>
                <button class="btn btn-primary" id="save-employee-btn">Save Employee</button>
            </div>
        </div>
    </div>

    <!-- MODAL: Shift Form -->
    <div class="modal-overlay" id="shift-modal">
        <div class="modal">
            <div class="modal-header">
                <h3 id="shift-modal-title">Add Shift</h3>
                <button class="btn btn-icon modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <form id="shift-form">
                    <input type="hidden" id="shift-id">

                    <div class="form-group">
                        <label for="shift-name">Shift Name</label>
                        <input type="text" id="shift-name" required placeholder="e.g., Morning-FT">
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="shift-start">Start Time</label>
                            <select id="shift-start" required></select>
                        </div>
                        <div class="form-group">
                            <label for="shift-end">End Time</label>
                            <select id="shift-end" required></select>
                        </div>
                        <div class="form-group">
                            <label for="shift-role">Required Role</label>
                            <select id="shift-role" required>
                                <option value="ATL">ATL (Manager)</option>
                                <option value="FullTime">Full Time</option>
                                <option value="PartTime">Part Time</option>
                            </select>
                        </div>
                    </div>

                    <div class="shift-preview">
                        <span id="shift-duration">8 hours</span>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn" id="cancel-shift-btn">Cancel</button>
                <button class="btn btn-primary" id="save-shift-btn">Save Shift</button>
            </div>
        </div>
    </div>

    <!-- MODAL: Confirm Dialog -->
    <div class="modal-overlay" id="confirm-modal">
        <div class="modal modal-sm">
            <div class="modal-header">
                <h3>Confirm</h3>
            </div>
            <div class="modal-body">
                <p id="confirm-message">Are you sure?</p>
            </div>
            <div class="modal-footer">
                <button class="btn" id="confirm-cancel">Cancel</button>
                <button class="btn btn-danger" id="confirm-ok">Confirm</button>
            </div>
        </div>
    </div>

    <!-- MODAL: Role Form -->
    <div class="modal-overlay" id="role-modal">
        <div class="modal modal-sm">
            <div class="modal-header">
                <h3 id="role-modal-title">Add Role</h3>
                <button class="btn btn-icon modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <form id="role-form">
                    <input type="hidden" id="role-id">

                    <div class="form-group">
                        <label for="role-name">Role Name (ID)</label>
                        <input type="text" id="role-name" required placeholder="e.g., Cashier">
                    </div>

                    <div class="form-group">
                        <label for="role-label">Display Label</label>
                        <input type="text" id="role-label" required placeholder="e.g., Cashier">
                    </div>

                    <div class="form-group">
                        <label for="role-color">Color</label>
                        <input type="color" id="role-color" value="#003F24"
                            style="width: 100%; height: 50px; border-radius: 8px; border: 2px solid var(--border-color);">
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn" id="cancel-role-btn">Cancel</button>
                <button class="btn btn-primary" id="save-role-btn">Save Role</button>
            </div>
        </div>
    </div>

    <!-- Toast Container -->
    <div class="toast-container" id="toast-container"></div>

    <!-- Hidden file input for import -->
    <input type="file" id="import-file" accept=".json" style="display:none">

    <!-- Scripts -->
    <script src="storage.js"></script>
    <script src="scheduler.js"></script>
    <script src="app.js"></script>
</body>

</html>